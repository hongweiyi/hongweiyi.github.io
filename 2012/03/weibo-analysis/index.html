<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> @小e_鸿伟的微博粗分析 · 小e的笔记</title><meta name="description" content="1**、杂侃**
最近状态着实不太好，也有点闲。大部分时间都在看书，coding也不太多，琢磨着写一两个小程序，也没找到好玩的。昨晚无聊刷微博的时候，灵机一动，干脆分析分析自己的微博吧。所以也就有了这篇文章。

2**、数据准备**
要分析，就得有数据，数据也还好弄，到了微博的开放平台，下了一个Java SDK，开始拉数据……
微博的sdk比人人的易用一些，先登录获得access_token，再创建一个Weibo对象，将请求的json地址填进去就可以了。         

User user = um.showUserById(uid);&amp;#160;&amp;#160; 2.  // get the count of your w"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="http://weibo.com/1674333040" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://twitter.com/hongwei89" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">@小e_鸿伟的微博粗分析</h1><div class="post-meta"><div class="post-time">Mar 26, 2012</div></div><div class="post-content"><p><strong>1**</strong>、杂侃**</p>
<p>最近状态着实不太好，也有点闲。大部分时间都在看书，coding也不太多，琢磨着写一两个小程序，也没找到好玩的。昨晚无聊刷微博的时候，灵机一动，干脆分析分析自己的微博吧。所以也就有了这篇文章。</p>
<a id="more"></a>
<p><strong>2**</strong>、数据准备**</p>
<p>要分析，就得有数据，数据也还好弄，到了微博的<a href="http://open.weibo.com/" target="_blank" rel="external">开放平台</a>，下了一个Java SDK，开始拉数据……</p>
<p>微博的sdk比人人的易用一些，先登录获得access_token，再创建一个Weibo对象，将请求的json地址填进去就可以了。<br>  <div class="dp-highlighter">   <div class="bar"></div>    </div></p>
<ol>
<li><span><span>User user = um.showUserById(uid);&#160;&#160; </span></span>2.  <span></span><span class="comment">// get the count of your weibos </span><span>&#160; </span>3.  <span></span><span class="comment">// prepared for iteration </span><span>&#160; </span>4.  <span></span><span class="keyword">int</span><span> count = user.getStatusesCount();&#160;&#160; </span>5.  <span></span><span class="keyword">int</span><span> page_count = </span><span class="number">30</span><span>;&#160;&#160; </span>6.  <span>String json = </span><span class="string">&quot;<a href="https://api.weibo.com/2/statuses/user_timeline.json?count=&amp;quot" target="_blank" rel="external">https://api.weibo.com/2/statuses/user_timeline.json?count=&amp;quot</a>;</span><span>&#160; </span>7.  <span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; + page_count + </span><span class="string">&quot;&amp;page=&quot;</span><span>;&#160;&#160; </span>8.  <span></span><span class="keyword">int</span><span> page = </span><span class="number">1</span><span>;&#160;&#160; </span>9.  <span>FileWriter writer;&#160;&#160; </span>10.  <span>Response response = </span><span class="keyword">null</span><span>;&#160;&#160; </span>11.  <span></span><span class="keyword">do</span><span> {&#160;&#160; </span>12.  <span>&#160;&#160;&#160; writer = </span><span class="keyword">new</span><span> FileWriter(</span><span class="keyword">new</span><span> File(</span><span class="string">&quot;txt&quot;</span><span>+page+</span><span class="string">&quot;.txt&quot;</span><span>), </span><span class="keyword">true</span><span>);&#160;&#160; </span>13.  <span>&#160;&#160;&#160; response = weibo.client.get(json + page);&#160;&#160; </span>14.  <span>&#160;&#160;&#160; writer.write(response.getResponseAsString());&#160;&#160; </span>15.  <span>} </span><span class="keyword">while</span><span> (page++ * page_count &lt; count);&#160;&#160; </span>     </li>
</ol>
<p>上面这段代码也就将我的微博就扒拉下来了。</p>
<p><strong>3**</strong>、数据解析**</p>
<p>扒拉下来的数据是标准的json格式。但是我一直用不习惯json包，找同学要了一个org.json的，不喜欢用。GSON又要将所有字段都写成实体类，嫌麻烦。所以最后的解析就直接用正则表达式了，简单、暴力、直接。</p>
<p>主要解析了created_at（发布时间）、source（发布客户端）两个字段。获得直接就是用的python的re对象，需要注意的是时间格式为“Tue May 31 17:46:55 +0800 2011”，在Java中需要创建一个格式化对象，格式化代码如下：    <table border="1" cellspacing="0" cellpadding="0"><tbody>       <tr>         <td valign="top" width="568">           <p>SimpleDateFormat <strong>formater</strong> = <strong>new</strong> SimpleDateFormat(</p>
<p>&quot;EEE MMM d HH:mm:ss Z yyyy&quot;, Locale.<em>ENGLISH</em>);<br>         </p></td>       </tr>     </tbody></table> </p>  <p></p>
<p>格式化之后，最好将Date对象转换成Calender对象，因为Date中的年份不太好用，怎么不好用，自己可以体会一下。</p>
<p><strong>4**</strong>、生成图表**</p>
<p>有了数据，就直接复制到Excel中，生成图表。图表如下：</p>
<p><a href="/images/2012/03/image6.png"><img src="/images/2012/03/image_thumb6.png" alt="image" title="image"></a> </p>
<p>我是有多爱转发啊……</p>
<p><a href="/images/2012/03/image7.png"><img src="/images/2012/03/image_thumb7.png" alt="image" title="image"></a> </p>
<p>网页版新浪微博稳居第一，因为我大部分时间还是花在pc上的。买了pad后，在iPad客户端上的发布数应该会上升很多。</p>
<p><a href="/images/2012/03/image8.png"><img src="/images/2012/03/image_thumb8.png" alt="image" title="image"></a> </p>
<p>一周中，每天发的微博数差不多，也是，我对周几一般来说是没概念的。</p>
<p><a href="/images/2012/03/image9.png"><img src="/images/2012/03/image_thumb9.png" alt="image" title="image"></a> </p>
<p>一天中，发布的大部分时间都集中在了中午和午夜，夜晚倒能理解，中午为啥也那么高呢？</p>
<p><a href="/images/2012/03/image10.png"><img src="/images/2012/03/image_thumb10.png" alt="image" title="image"></a> </p>
<p>去年三月份创建的微博帐户，之后发布的微博数急速上升，到了五月到了顶峰，之后就回落。去年十月份之后就比较忙了，一直到了开学，微博又有上升的趋势了。</p>
<p><strong>5、小结</strong></p>
<p>以上仅是在无聊中无聊的作品，仅仅是一些字段的孤立的统计，没有任何技术内涵可言，但是还是可以说明一些问题的。不过改天得仔细分析分析我发的微博内容，嗯，是的……</p>
</div></article></div></section><footer><div class="paginator"><a href="/2012/04/nlp-repost-segmentation/" class="prev">上一篇</a><a href="/2012/03/data-structure-disjoint-set/" class="next">下一篇</a></div><div data-thread-key="2012/03/weibo-analysis/" data-title="@小e_鸿伟的微博粗分析" data-url="http://hongweiyi.com/2012/03/weibo-analysis/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"yihongwei"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-66911097-1",'auto');ga('send','pageview');</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>