<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Shell常用命令 文件/目录操作篇 · 小e的笔记</title><meta name="description" content="2.1 **基本操作**
ls(list), cd(change directory), rm(remove), touch, mkdir(make directory), rmdir(remove directory), &lt;span"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/tags" target="_self" class="nav-list-link">TAGS</a></li><li class="nav-list-item"><a href="http://weibo.com/1674333040" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://twitter.com/hongwei89" target="_blank" class="nav-list-link">TWITTER</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Shell常用命令 文件/目录操作篇</h1><div class="post-meta"><div class="post-time">Jan 18, 2013 | [<a class="tag-link" href="/tags/Linux/">Linux</a>, <a class="tag-link" href="/tags/Shell/">Shell</a>]</div></div><div class="post-content"><p><strong>2.1 **</strong>基本操作**</p>
<pre><code><span class="function"><span class="title">ls</span><span class="params">(list)</span></span>, <span class="function"><span class="title">cd</span><span class="params">(change directory)</span></span>, <span class="function"><span class="title">rm</span><span class="params">(remove)</span></span>, touch, <span class="function"><span class="title">mkdir</span><span class="params">(make directory)</span></span>, <span class="function"><span class="title">rmdir</span><span class="params">(remove directory)</span></span>, <span class="function"><span class="title">pwd</span><span class="params">(print working dir)</span></span>
</code></pre><blockquote>
<p><strong>TIPS: </strong>cd - 可以返回上次所处目录。</p>
<pre><code><span class="keyword">*</span><span class="keyword">*</span>WARNING:<span class="keyword">*</span><span class="keyword">*</span> 慎用rm -rf <span class="keyword">*</span>，想当年某同学就rm掉了工作目录，不过代码有备份。
</code></pre></blockquote>
<pre><code><span class="variable">&lt;!--more--&gt;</span>

&amp;nbsp;

<span class="keyword">*</span><span class="keyword">*</span>2.2 <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>文件查找<span class="keyword">*</span><span class="keyword">*</span>

最常用的当属<span class="keyword">*</span><span class="keyword">*</span>find<span class="keyword">*</span><span class="keyword">*</span>命令了。find的使用格式及我常用例子如下：
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="631"><br>    <tbody><br>        <tr><br>            <td valign="top" width="629"><br><br>                    &nbsp; &gt;&gt; $ find -help<br><br>                    &nbsp; Usage: find [path] <a href="&lt;option&gt; &lt;action&gt;">expression</a> # commented by wikie<br><br>                    &nbsp; &gt;&gt; $ find . -name &quot;<em>.txt&quot;&nbsp;&nbsp;&nbsp; # 查找当前目录下所有符合&quot;</em>.txt&quot;的文件<br><br>                    &nbsp; &gt;&gt; $ find . -type f|d|l&nbsp;&nbsp;&nbsp; # 查找当前目录下所有普通文件|目录|链接符号<br><br>                    &nbsp; &gt;&gt; $ find . -size 1024(c)&nbsp;&nbsp;&nbsp; # 查找当前目录大小为1024个块（字节）的文件<br><br>                    &nbsp; &gt;&gt; $ find . -maxdepth 1 -name &quot;<em>.txt&quot;&nbsp;&nbsp;&nbsp; # 设置最大查找深入，1表示为当前目录<br><br>                    &nbsp; &gt;&gt; $ find . -a(m)time -1&nbsp;&nbsp;&nbsp; # 查找当前目录下最后24小时访问（修改）的文件<br><br>                    &nbsp; &gt;&gt; $ find . -name &quot;</em>.tmp&quot; -exec(-ok) rm {} \;&nbsp;&nbsp; # 删除当前目录的所有tmp文件，-ok表示执行前先询问用户<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<blockquote>
<p><strong>TIPS1:</strong> 如不太喜欢用-exec，也可以用 find . | while read line; do do_sth to $line; done;</p>
<pre><code>**TIPS2:** 最好的参考文档莫过于<span class="keyword">man</span> find了
</code></pre></blockquote>
<pre><code><span class="keyword">*</span><span class="keyword">*</span>locate<span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>：<span class="keyword">*</span><span class="keyword">*</span>

locate命令其实是&amp;ldquo;find -name&amp;rdquo;的另一种写法，但是要比后者快得多，原因在于它不搜索具体目录，而是搜索一个数据库（/var/lib/locatedb），这个数据库中含有本地所有文件信息。Linux系统自动创建这个数据库，并且每天自动更新一次，所以使用locate命令查不到最新变动过的文件。为了避免这种情况，可以在使用locate之前，先使用updatedb命令，手动更新数据库。不过需要root权限。
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="631"><br>    <tbody><br>        <tr><br>            <td valign="top" width="629"><br><br>                    &nbsp; &gt;&gt; $ locate your_file<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<pre><code>**whereis:**

whereis命令只能用于程序名的搜索，而且只搜索二进制文件（参数-b）、<span class="keyword">man</span>说明文件（参数-m）和源代码文件（参数-s）。如果省略参数，则返回所有信息。
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="632"><br>    <tbody><br>        <tr><br>            <td valign="top" width="630"><br><br>                    &nbsp; &gt;&gt; $ whereis whereis<br><br>                    &nbsp; whereis: /usr/bin/whereis /usr/share/man/man1/whereis.1.gz<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<pre><code><span class="keyword">*</span><span class="keyword">*</span>which:<span class="keyword">*</span><span class="keyword">*</span>

which命令的作用是，在PATH变量指定的路径中，搜索某个系统命令的位置，并且返回第一个搜索结果。也就是说，使用which命令，就可以看到某个系统命令是否存在，以及执行的到底是哪一个位置的命令。
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="633"><br>    <tbody><br>        <tr><br>            <td valign="top" width="631"><br><br>                    &nbsp; &gt;&gt; $ which gcc<br><br>                    &nbsp; /usr/bin/gcc<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<blockquote>
<p><strong>REFE: </strong>以上多数文字摘抄自阮一峰的文章 - 《<a href="http://www.ruanyifeng.com/blog/2009/10/5_ways_to_search_for_files_using_the_terminal.html" target="_blank" rel="external">Linux的五个查找命令</a>》</p>
</blockquote>
<pre><code>&amp;nbsp;

<span class="keyword">*</span><span class="keyword">*</span>2.3 <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>磁盘操作<span class="keyword">*</span><span class="keyword">*</span>

du(disk usage)查看目录大小，df(disk free)查看磁盘状况。均有-h参数，代表human-readable，即数据小大会显示单位。
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="634"><br>    <tbody><br>        <tr><br>            <td valign="top" width="632"><br><br>                    &nbsp; &gt;&gt; $ du -sh .&nbsp;&nbsp;&nbsp;&nbsp; # -s summay<br><br>                    &nbsp; 10G&nbsp;&nbsp;&nbsp;&nbsp; .<br><br>                    &nbsp; &gt;&gt; $ df -h<br><br>                    &nbsp; Filesystem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Size&nbsp;&nbsp; Used&nbsp;&nbsp; Avail&nbsp;&nbsp; Use%&nbsp;&nbsp; Mounted on<br><br>                    &nbsp; /dev/hda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 62G&nbsp;&nbsp;&nbsp; 21G&nbsp;&nbsp;&nbsp; 42G&nbsp;&nbsp;&nbsp; 34%&nbsp;&nbsp;&nbsp;&nbsp; /<br><br>                    &nbsp; tmpfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 502M&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 502M&nbsp;&nbsp;&nbsp; 0%&nbsp;&nbsp;&nbsp;&nbsp; /dev/shm<br><br>                    &nbsp; &gt;&gt; $ df -ih&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # -i inode usage<br><br>                    &nbsp; Filesystem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Inodes&nbsp;&nbsp; IUsed&nbsp;&nbsp; IFree&nbsp;&nbsp; IUse%&nbsp;&nbsp; Mounted on<br><br>                    &nbsp; /dev/hda1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 63M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 197K&nbsp;&nbsp;&nbsp; 62M&nbsp;&nbsp;&nbsp; 1%&nbsp;&nbsp; /<br><br>                    &nbsp; tmpfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 126K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 126K&nbsp;&nbsp;&nbsp; 1%&nbsp;&nbsp; /dev/shm<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<blockquote>
<p><strong>WARNING: </strong>这两个命令非常重要，在机器上运行大任务的同时，切忌注意磁盘空间是否充裕（我们这里规定超过85%就报警）。经常有同事撑爆服务器，上头就过来找我麻烦T_T，真的冤枉。话说，以前也因为没有估量自己任务大小，撑爆一个集群的情况出现&hellip;&hellip;</p>
<pre><code><span class="keyword">*</span><span class="keyword">*</span>TIPS:<span class="keyword">*</span><span class="keyword">*</span> df是针对整个文件系统的，它通过系统调用statfs从文件系统的超级块中获取整个文件系统的磁盘使用情况，它没有没法针对任意目录来统计，但统计磁盘大小速度更快。如果需要统计磁盘大小，可以用df代替du：df -h |<span class="string"> grep mounted_disk </span>|<span class="string"> awk &amp;#39;{print $4}&amp;#39;</span>
</code></pre></blockquote>
<pre><code>&amp;nbsp;

<span class="keyword">*</span><span class="keyword">*</span>2.4 <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>权限管理<span class="keyword">*</span><span class="keyword">*</span>

chmod(change mode), chown(change owner)

说实在的，这两个命令在非管理员的情况下一般用不到。用得多的是chmod +x file，给文件添加执行权限。其他的还有需求自行谷歌。

&amp;nbsp;

<span class="keyword">*</span><span class="keyword">*</span>2.5 <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>文件压缩、裁剪<span class="keyword">*</span><span class="keyword">*</span>

压缩用的是tar命令，也有用zip的但是不多。tar的参数实在是太多了，列不过来，就说两个常用的压缩解压缩吧：
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="630"><br>    <tbody><br>        <tr><br>            <td valign="top" width="628"><br><br>                    &nbsp; &gt;&gt; $ tar zcvf file.tar.gz file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # z 以gzip的压缩方式压缩&nbsp; c 压缩<br><br>                    &nbsp; &gt;&gt; $ tar zxvf file.tar.gz [-C untar_dir]<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<blockquote>
<p><strong>WARNING: </strong>需要注意gzip压缩解压缩非常耗时且耗cpu</p>
<pre><code><span class="keyword">*</span><span class="keyword">*</span>TIPS: <span class="keyword">*</span><span class="keyword">*</span>在远程拷贝（scp）文件的时候，如果文件非常大，需要考虑拷贝中断所带来的痛苦。所以适当的将文件裁剪成多个再scp，拷贝中断带来的痛苦系数会大大减小。
</code></pre></blockquote>
<table border="1" cellpadding="0" cellspacing="0" width="632"><br>    <tbody><br>        <tr><br>            <td valign="top" width="630"><br><br>                    &nbsp; &gt;&gt; $ split –help<br><br>                    &nbsp; Usage: split [OPTION] [INPUT [PREFIX]]<br><br>                    &nbsp; &gt;&gt; $ split -b 1024b(k)(m) filename (splited_filename)&nbsp;&nbsp; # 按大小裁剪<br><br>                    &nbsp; &gt;&gt; $ split -l 1000 filename (splited_filename)&nbsp;&nbsp; # 按行数裁剪<br><br>                    &nbsp; &gt;&gt; $ cat splited_filename* &gt; filename&nbsp;&nbsp; # 合并被裁剪文件<br><br>            </td><br>        </tr><br>    </tbody><br></table>
</div></article></div></section><footer><div class="paginator"><a href="/2013/01/linux-text-shell/" class="prev">上一篇</a><a href="/2013/01/linux-shell-term-tuning/" class="next">下一篇</a></div><div data-thread-key="2013/01/linux-file-directory-shell/" data-title="Shell常用命令 文件/目录操作篇" data-url="http://hongweiyi.com/2013/01/linux-file-directory-shell/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"yihongwei"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-66911097-1",'auto');ga('send','pageview');</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>