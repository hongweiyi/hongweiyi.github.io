<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Shell常用命令 终端优化前篇 · 小e的笔记</title><meta name="description" content="在黑框框shell下作业也一年多了，其中实战占了9个月，从最开始的翻阅各种书籍，到后面问谷歌，也算是能熟练&amp;ldquo;掌握&amp;rdquo;这门工具，也搜集了一些&amp;ldquo;奇技淫巧&amp;rdquo;。现在好好的总结一下吧，顺带也查漏补缺&amp;hellip;&amp;hellip;
&amp;lt;!--more--&amp;gt;

**1.1 ****终端设置**

下载一个好用的终端，如**[xshell](http://www.netsarang.com/products/xsh_overview.html)**，[**putty**](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)。

设置Encoding、Terminal Type，一般来说在终端中设置一下即可。Encoding为utf8，T"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="http://weibo.com/1674333040" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://twitter.com/hongwei89" target="_blank" class="nav-list-link">TWITTER</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/tags" target="_self" class="nav-list-link">TAGS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Shell常用命令 终端优化前篇</h1><div class="post-meta"><div class="post-time">Jan 17, 2013</div></div><div class="post-content"><p>在黑框框shell下作业也一年多了，其中实战占了9个月，从最开始的翻阅各种书籍，到后面问谷歌，也算是能熟练&ldquo;掌握&rdquo;这门工具，也搜集了一些&ldquo;奇技淫巧&rdquo;。现在好好的总结一下吧，顺带也查漏补缺&hellip;&hellip;</p>
<pre><code><span class="xml"><span class="comment">&lt;!--more--&gt;</span></span>

<span class="strong">**1.1 **</span><span class="strong">**终端设置**</span>

下载一个好用的终端，如<span class="strong">**[xshell](http://www.netsarang.com/products/xsh_overview.html)**</span>，[<span class="link_label">**putty**</span>](<span class="link_url">http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html</span>)。

设置Encoding、Terminal Type，一般来说在终端中设置一下即可。Encoding为utf8，Terminal Type设置为xterm、VT100、linux都可以，设置其他的类型有的可能ls文件会没有颜色（这个情况在screen命令中也会出现，到时候再讲解决方案吧），或者Home/End键不好用（代替快捷键：Ctrl+a/e）之类的。

<span class="strong">**1.2 shell**</span><span class="strong">**提示符设置**</span>

终端提示符默认的就是白色的用户名，看着非常不舒服，可以设置一下当前环境的提示符颜色，变量是PS1：

[<span class="link_label">![image</span>](<span class="link_url">http://hongweiyi.com/wp-content/uploads/2013/01/image_thumb.png "image"</span>)](<span class="link_url">http://hongweiyi.com/wp-content/uploads/2013/01/image.png</span>)
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="626"><br>    <tbody><br>        <tr><br>            <td valign="top" width="624"><br><br>                    &nbsp; &gt;&gt; $ echo $PS1<br><br>                    &nbsp; [\e[31;1m]\u[\e[0m]@[\e[32;1m]your ip[\e[0m]:[\e[35;1m]\w[\e[0m]\$<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<pre><code>你也可以不填写<span class="literal">ip</span>，用命令获得当前<span class="literal">ip</span>：
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="626"><br>    <tbody><br>        <tr><br>            <td valign="top" width="624"><br><br>                    &nbsp; &gt;&gt; $ export PS1=&quot;[\e[31;1m]\u[\e[0m]@[\e[32;1m]<code>/sbin/ifconfig eth1|grep &quot;inet&amp;nbsp;&amp;nbsp; addr:&quot;|cut -d: -f 2|cut -d&quot; &quot; -f1</code>[\e[0m]:[\e[35;1m]\w[\e[0m]\$ &quot;<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<pre><code>其他颜色可参考：**[Linux终端下的颜色设置](http://unix-cd.com/unixcd12/article_7281.html)**

上面的PS1变量可以设置在用户配置中，文件为~/.bashrc，在该文件中添加一行：<span class="built_in">export</span> PS1=&amp;<span class="built_in">times</span>;&amp;<span class="built_in">times</span>;&amp;<span class="built_in">times</span>;即可。如果再次登陆的时候，该命令没有生效，则添加~/.bash_profile文件，当shell被打开时，该文件会被执行一次。在文件中添加命令即可加载~/.bashrc：
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="625"><br>    <tbody><br>        <tr><br>            <td valign="top" width="623"><br><br>                    &nbsp; # Get the aliases and functions<br><br>                    &nbsp; if [ -f ~/.bashrc ]; then<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . ~/.bashrc<br><br>                    &nbsp; fi<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<pre><code>如果你想该文件立即生效，可以用source ~/.bashrc命令立即加载执行该文件。

&amp;nbsp;

<span class="keyword">*</span><span class="keyword">*</span>1.3 <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>别名设置<span class="keyword">*</span><span class="keyword">*</span>

可以用一些简单的别名代替一些复杂的命令，如下：
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="626"><br>    <tbody><br>        <tr><br>            <td valign="top" width="624"><br><br>                    &nbsp; alias ..=&quot;cd ..&quot;<br><br>                    &nbsp; alias …=&quot;cd ../..&quot;<br><br>                    &nbsp;<br><br>                    &nbsp; alias cd..=&quot;cd ..&quot;<br><br>                    &nbsp; alias ll=&quot;ls -l&quot;<br><br>                    &nbsp; alias la=&quot;ls -a&quot;<br><br>                    &nbsp; alias tree=&quot;~/code/tree&quot;<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<pre><code>将<span class="keyword">alias</span>添加进~<span class="regexp">/.bashrc中。~/code</span><span class="regexp">/tree是一个shell脚本，脚本内容如下：</span>
</code></pre><table border="1" cellpadding="0" cellspacing="0" width="626"><br>    <tbody><br>        <tr><br>            <td valign="top" width="624"><br><br>                    &nbsp; #!/bin/sh<br><br>                    &nbsp; function tree_files()<br><br>                    &nbsp; {<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; find . -print 2&gt;/dev/null|\<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; awk &#39;!/.$/ {for (i=1;i&lt;NF;i++){\<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d=length($i);if ( d &lt; 5 &amp;&amp; i != 1 )d=5;printf(&quot;%&quot;d&quot;s&quot;,&quot;|&quot;)}print &quot;—&quot;$NF}&#39; \<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FS=&#39;/&#39; | more<br><br>                    &nbsp; }<br><br>                    &nbsp; function tree_dirs()<br><br>                    &nbsp; {<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; find . -type d -print 2&gt;/dev/null|\<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; awk &#39;!/.$/ {for (i=1;i&lt;NF;i++){\<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; d=length($i);if ( d &lt; 5 &amp;&amp; i != 1 )d=5;printf(&quot;%&quot;d&quot;s&quot;,&quot;|&quot;)}print &quot;—&quot;$NF}&#39; \<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FS=&#39;/&#39; | more<br><br>                    &nbsp; }<br><br>                    &nbsp; function help()<br><br>                    &nbsp; {<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo &quot;Usage: tree [-f|-d]&quot;<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo &quot;&nbsp; -f: list files of current directory&quot;<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo &quot;&nbsp; -d: list direcotries of current directory&quot;<br><br>                    &nbsp; }<br><br>                    &nbsp; if [ $# = 0 ]; then<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tree_dirs<br><br>                    &nbsp; elif [ $# = 1 ]; then<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if [ $1 = “-f” ]; then<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tree_files<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; elif [ $1 = “-d” ]; then<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tree_dirs<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; help<br><br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br><br>                    &nbsp; fi<br><br>            </td><br>        </tr><br>    </tbody><br></table>

<pre><code>&amp;nbsp;

<span class="keyword">*</span><span class="keyword">*</span>1.4 <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span>文档编辑器设置<span class="keyword">*</span><span class="keyword">*</span>

我用的是vim，配置文件为~/.vimrc。由于工作机较多，所以没有一个个去配置，不可缺少的是syntax on（开启高亮），indent都没太大必要了。当然，专用开发机需要配置一个比较好用的，因人而异，如需要较好配置文件的可自行谷歌。

有了以上四步，基本上一个简单方便好用的终端就有了，接下来我会一一介绍常用的shell命令：文件/目录操作、输入/输出操作、文本操作、进程操作等。
</code></pre><blockquote>
<p><strong>BTW：</strong>个人不太喜欢装各种各样的辅助工具（tmux、vim相关、make相关。tree的工具也不想装，直接写shell多方便），因为环境多变，如果突然没了插件可能会不知所措，喜欢最原始最朴素的命令和工具，认为这才是王道！</p>
</blockquote>
</div></article></div></section><footer><div class="paginator"><a href="/2013/01/linux-file-directory-shell/" class="prev">上一篇</a><a href="/2013/01/2013-learning-plan/" class="next">下一篇</a></div><div data-thread-key="2013/01/linux-shell-term-tuning/" data-title="Shell常用命令 终端优化前篇" data-url="http://hongweiyi.com/2013/01/linux-shell-term-tuning/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"yihongwei"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-66911097-1",'auto');ga('send','pageview');</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>